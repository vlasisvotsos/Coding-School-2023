@page "/cashierTab/customers"
@inject HttpClient httpClient

<style>
    #Customers {
        font-family: Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

        #Customers td, #Customers th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #Customers tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #Customers tr:hover {
            background-color: #ddd;
        }

        #Customers th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #04AA6D;
            color: white;
        }
</style>

<PageTitle>Customers</PageTitle>

<h3>Customers</h3>

@if(isLoading){
    <p> Loading... </p>
}
else{
<table id="Customers">
    <tr>
        <th>
            Card Number:
        </th>
        <th>
            Name:
        </th>
        <th>
            Surname:
        </th>
        <th>
            Action:
        </th>
    </tr>
@foreach(CustomerDto customerDto in customers)
{
    <tr>
        <th>    
            <input type="text" placeholder="Card Number" @bind="customerDto.CardNumber"/>
        </th>
        <th>
            <input type="text" placeholder="Name" @bind="customerDto.Name" />
        </th>
        <th>
            <input type="text" placeholder="Surname" @bind="customerDto.Surname" />
        </th>
        <th>
            @*<button class="btn btn-primary" @onclick="()=> EditCustomer(customerDto)">Edit</button>
            <button class="btn btn-danger" @onclick="()=> DeleteCustomer(customerDto)">Delete</button>*@
        </th>
    </tr>
}
</table>
}

@code {
    List<CustomerDto> customers = new List<CustomerDto>();
    bool isLoading { get; set; } = true;

    protected override async Task OnInitializedAsync()
    {
        await LoadItemsFromServer();
        isLoading = false;
    }

    private async Task LoadItemsFromServer()
    {
        customers = await httpClient.GetFromJsonAsync<List<CustomerDto>>("customer");
    }

}
